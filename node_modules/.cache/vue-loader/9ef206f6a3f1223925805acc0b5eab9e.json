{"remainingRequest":"C:\\web2019\\fourth\\day02\\demo\\scaffolding\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\web2019\\fourth\\day02\\demo\\scaffolding\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\web2019\\fourth\\day02\\demo\\scaffolding\\src\\views\\Home.vue","mtime":1641353436910},{"path":"C:\\web2019\\fourth\\day02\\demo\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640758908837},{"path":"C:\\web2019\\fourth\\day02\\demo\\scaffolding\\node_modules\\babel-loader\\lib\\index.js","mtime":1640758922024},{"path":"C:\\web2019\\fourth\\day02\\demo\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640758908837},{"path":"C:\\web2019\\fourth\\day02\\demo\\scaffolding\\node_modules\\vue-loader\\lib\\index.js","mtime":1640758924784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXJ0aWNsZXM6IFtdLCAvL+eUqOS6juWtmOWCqOaJgOacieeahOaWh+eroOS/oeaBrwogICAgICBhY3RpdmU6ICIxIiwgLy/liLbpobbpg6jlr7zoiKrpu5jorqTpgInpoblpZAogICAgICBzZWxlY3RlZDogInNob3V5ZSIsIC8v5oyH5a6a5bqV6YOo6YCJ6aG55Y2h6buY6K6k6YCJ5Lit6aG5aWQKICAgICAgaDogIjIxMHB4IiwgLy/ova7mkq3lm77nmoTpu5jorqTpq5jluqYKICAgICAgY2F0czogW10sIC8v5a2Y5YKo57G75Yir5pWw57uECiAgICAgIHBhZ2U6IDEsCiAgICAgIGxvYWRpbmc6IGZhbHNlLCAvL+eUqOS6juagh+ivhiDliJfooajmmK/lkKbmraPlnKjliqDovb3kuK0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WKoOi9veaWh+eroOWIl+ihqCzpgJrov4djYWxsYmFja+i/lOWbnuWPkeivt+axguiOt+WPlueahOaWh+eroOaVsOe7hAogICAgLy9jaWQg57G75YiraWQKICAgIC8vcGFnZSDpobXnoIEKICAgIC8vY2FsbGJhY2sg5Zue6LCD5pa55rOVCiAgICBsb2FkQXJ0aWNsZXMoY2lkLCBwYWdlLCBjYWxsYmFjaykgewogICAgICAvL+W8ueWHuuetieW+heahhgogICAgICAvL1Z1ZS51c2UoTWludFVJKeaXtiDlsIbkvJrkuLpWdWXnmoTljp/lnovms6jlhaUkaW5kaWNhdG9y5bGe5oCnCiAgICAgIHRoaXMuJGluZGljYXRvci5vcGVuKHsKICAgICAgICB0ZXh0OiAi5Yqg6L295LitLi4uIiwKICAgICAgICBzcGlubmVyVHlwZTogInNuYWtlIiwKICAgICAgfSk7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KGAvYXJ0aWNsZXM/Y2lkPSR7Y2lkfSZwYWdlPSR7cGFnZX1gKS50aGVuKChyZXMpID0+IHsKICAgICAgICBsZXQgYXJ0cyA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgICAgY2FsbGJhY2soYXJ0cyk7CiAgICAgICAgLy/lj5bmtojnrYnlvoXmoYYKICAgICAgICB0aGlzLiRpbmRpY2F0b3IuY2xvc2UoKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGluaXRTd2lwZSgpIHsKICAgICAgLy/orqHnrpfova7mkq3lm77nmoTpq5jluqYg5Li6dGhpcy5o5Y+Y6YeP6LWL5YC8CiAgICAgIGxldCBzY3JlZW5XID0gd2luZG93LnNjcmVlbi53aWR0aDsKICAgICAgbGV0IHBpY3cgPSAxMjQyOwogICAgICBsZXQgcGljaCA9IDY5ODsKICAgICAgbGV0IHN3aXBlaCA9IE1hdGguZmxvb3IoKHBpY2ggKiBzY3JlZW5XKSAvIHBpY3cpICsgInB4IjsKICAgICAgdGhpcy5oID0gc3dpcGVoOwogICAgfSwKICAgIC8vIOWPkeivt+axguWIneWni+WMliDlr7zoiKrliJfooagKICAgIGluaXROYXYoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvY2F0ZWdvcnkiKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHRoaXMuY2F0cyA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5jYXRzKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lo7DmmI7op6blupXliqDovb3nmoRsb2FkbW9yZeaWueazlQogICAgbG9hZG1vcmUoKSB7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHJldHVybjsgLy/lpoLmnpzmraPlnKjliqDovb3kuK0s5YiZ55u05o6lcmV0dXJuCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7IC8v5Yqg6L295LitIOmYsuatomxvYWRtb3Jl6YeN5aSN6LCD55SoCiAgICAgIGxldCBjaWQgPSB0aGlzLmFjdGl2ZTsgLy/lvZPliY3mv4DmtLvpobnnmoTnsbvliKtpZCDlsLHmmK9jaWQKICAgICAgbGV0IHBhZ2UgPSArK3RoaXMucGFnZTsgLy/ojrflj5bkuIvkuIDpobXpobXnoIEKICAgICAgY29uc29sZS5sb2coYOinpuW6leWKoOi9veS4i+S4gOmhtTogY2lkOiR7Y2lkfSAgcGFnZToke3BhZ2V9YCk7CiAgICAgIC8v5Y+R6YCBaHR0cOivt+axgizojrflj5ZjaWTnsbvliKvkuIvnmoQgcGFnZemhteeggeeahOaVsOaNrjoKICAgICAgdGhpcy5sb2FkQXJ0aWNsZXMoY2lkLCBwYWdlLCAoYXJ0cykgPT4gewogICAgICAgIHRoaXMuYXJ0aWNsZXMucHVzaCguLi5hcnRzKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIOWIh+aNoumhtumDqOWvvOiIqumAieS4remhueinpuWPkQogICAgYWN0aXZlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAvL+WbnuWIsOmhtumDqAogICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgICAgIC8v5bCGdGhpcy5wYWdlIOmHjee9ruS4ujEgKOS7juesrOS4gOmhtemHjeaWsOWKoOi9vSkKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgY29uc29sZS5sb2cobmV3VmFsdWUpOyAvL25ld1ZhbHVlIOWwseaYr+W9k+WJjeexu+WIq2lkCiAgICAgIC8v5Y+R6YCBaHR0cOivt+axgiDorr/pl67lvZPliY3nsbvliKvkuIvnmoTnrKzkuIDpobXmlbDmja4g5pu05paw5YiX6KGoCiAgICAgIHRoaXMubG9hZEFydGljbGVzKG5ld1ZhbHVlLCAxLCAoYXJ0cykgPT4gewogICAgICAgIHRoaXMuYXJ0aWNsZXMgPSBhcnRzOwogICAgICB9KTsKICAgIH0sCiAgICBzZWxlY3RlZChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgaWYgKG5ld1ZhbHVlID09ICJtZSIpIHsKICAgICAgICAvL+eUqOaIt+eCueS6huW6lemDqOmAiemhuTrmiJHnmoQKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL21lIik7CiAgICAgIH0KICAgICAgdGhpcy5zZWxlY3RlZCA9ICJtYWluIjsKICAgIH0sCiAgfSwKCiAgLy8g5b2T5YmN6aG16Z2i5Y+Y5Li65r+A5rS75oCB5pe26Kem5Y+RCiAgYWN0aXZhdGVkKCkgewogICAgY29uc29sZS5sb2coIua/gOa0u0hvbWUiKTsKICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogIH0sCiAgLy8g5b2T5YmN6aG16Z2i5Y+Y5Li66Z2e5r+A5rS75oCB5pe26Kem5Y+RCiAgZGVhY3RpdmF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygi6Z2e5r+A5rS7SG9tZSIpOwogICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRTd2lwZSgpOyAvL+WIneWni+WMlui9ruaSreWbvgogICAgdGhpcy5pbml0TmF2KCk7IC8v5Yid5aeL5YyW5a+86IiqCiAgICAvL+WPkemAgWh0dHDor7fmsYIs6K6/6ZeudWnnsbvliKvkuIvnmoTpppbpobXmlofnq6DmlbDmja4KICAgIHRoaXMubG9hZEFydGljbGVzKDEsIDEsIChhcnRzKSA9PiB7CiAgICAgIHRoaXMuYXJ0aWNsZXMgPSBhcnRzOwogICAgfSk7CiAgfSwKfTsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 标题栏 -->\n    <mt-header title=\"学前端,到达内\" fixed>\n      <div slot=\"right\" v-if=\"$store.state.islogin\">\n      欢迎:{{$store.s}}\n      </div>\n      <div v-else slot=\"right\">\n        <router-link to=\"/register\" class=\"link\">注册</router-link>\n        <router-link to=\"/login\" class=\"link\">登录</router-link>\n      </div>\n    </mt-header>\n    <!-- 导航条 -->\n    <mt-navbar style=\"top: 40px\" v-model=\"active\" fixed>\n      <mt-tab-item :id=\"item.id + ''\" v-for=\"(item, i) in cats\" :key=\"i\">{{\n        item.category_name\n      }}</mt-tab-item>\n    </mt-navbar>\n    <!-- 动态面板 -->\n\n    <mt-tab-container\n      style=\"margin-bottom: 55px; margin-top: 90px\"\n      v-infinite-scroll=\"loadmore\"\n      infinite-scroll-distance=\"50px\"\n      :infinite-scroll-immediate-check=\"true\"\n    >\n      <mt-tab-container-item>\n        <!-- 轮播图 -->\n        <mt-swipe\n          :style=\"{ height: h }\"\n          :speed=\"2000\"\n          :atuo=\"1000\"\n          :continuous=\"false\"\n        >\n          <mt-swipe-item>\n            <img src=\"/images/1.jpg\" alt=\"\" />\n          </mt-swipe-item>\n          <mt-swipe-item>\n            <img src=\"/images/2.jpg\" alt=\"\" />\n          </mt-swipe-item>\n          <mt-swipe-item>\n            <img src=\"/images/3.jpg\" alt=\"\" />\n          </mt-swipe-item>\n        </mt-swipe>\n        <!-- 单一文章信息开始 -->\n        <div class=\"articleItem\" v-for=\"(item, i) in articles\" :key=\"i\">\n          <router-link :to=\"`/article?id=${item.id}`\">\n            <!-- 文章标题开始 -->\n            <div class=\"articleItem-header\">{{ item.subject }}</div>\n            <!-- 文章标题结束 -->\n            <!-- 文章图文信息开始 -->\n            <div class=\"articleItem-wrapper\">\n              <!-- 文章图像开始  -->\n              <div class=\"articleImg\">\n                <img :src=\"`/images/resource/articles/${item.image}`\" />\n              </div>\n              <!-- 文章图像结束 -->\n              <!-- 文章简介开始 -->\n              <div class=\"articleDes\">\n                {{ item.description }}\n              </div>\n              <!-- 文章简介结束 -->\n            </div>\n            <!-- 文章图文信息结束 -->\n          </router-link>\n        </div>\n        <!-- 单一文章信息结束 -->\n      </mt-tab-container-item>\n      <mt-tab-container-item id=\"2\">电商面板</mt-tab-container-item>\n      <mt-tab-container-item id=\"3\">网页面板</mt-tab-container-item>\n      <mt-tab-container-item id=\"4\">交互面板</mt-tab-container-item>\n    </mt-tab-container>\n    <!-- 底部选项卡 -->\n    <mt-tabbar v-model=\"selected\" fixed>\n      <mt-tab-item id=\"shouye\"\n        >首页\n        <img\n          slot=\"icon\"\n          :src=\"\n            require(`../assets/common/main_${\n              selected == 'shouye' ? '1' : '0'\n            }.png`)\n          \"\n          alt=\"\"\n        />\n      </mt-tab-item>\n      <mt-tab-item id=\"me\"\n        >我的\n        <img\n          slot=\"icon\"\n          :src=\"\n            require(`../assets/common/me_${selected == 'me' ? '1' : '0'}.png`)\n          \"\n          alt=\"\"\n        />\n      </mt-tab-item>\n    </mt-tabbar>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      articles: [], //用于存储所有的文章信息\n      active: \"1\", //制顶部导航默认选项id\n      selected: \"shouye\", //指定底部选项卡默认选中项id\n      h: \"210px\", //轮播图的默认高度\n      cats: [], //存储类别数组\n      page: 1,\n      loading: false, //用于标识 列表是否正在加载中\n    };\n  },\n  methods: {\n    //加载文章列表,通过callback返回发请求获取的文章数组\n    //cid 类别id\n    //page 页码\n    //callback 回调方法\n    loadArticles(cid, page, callback) {\n      //弹出等待框\n      //Vue.use(MintUI)时 将会为Vue的原型注入$indicator属性\n      this.$indicator.open({\n        text: \"加载中...\",\n        spinnerType: \"snake\",\n      });\n      this.axios.get(`/articles?cid=${cid}&page=${page}`).then((res) => {\n        let arts = res.data.results;\n        callback(arts);\n        //取消等待框\n        this.$indicator.close();\n      });\n    },\n\n    initSwipe() {\n      //计算轮播图的高度 为this.h变量赋值\n      let screenW = window.screen.width;\n      let picw = 1242;\n      let pich = 698;\n      let swipeh = Math.floor((pich * screenW) / picw) + \"px\";\n      this.h = swipeh;\n    },\n    // 发请求初始化 导航列表\n    initNav() {\n      this.axios.get(\"/category\").then((res) => {\n        console.log(res);\n        this.cats = res.data.results;\n        console.log(this.cats);\n      });\n    },\n    //声明触底加载的loadmore方法\n    loadmore() {\n      if (this.loading) return; //如果正在加载中,则直接return\n      this.loading = true; //加载中 防止loadmore重复调用\n      let cid = this.active; //当前激活项的类别id 就是cid\n      let page = ++this.page; //获取下一页页码\n      console.log(`触底加载下一页: cid:${cid}  page:${page}`);\n      //发送http请求,获取cid类别下的 page页码的数据:\n      this.loadArticles(cid, page, (arts) => {\n        this.articles.push(...arts);\n        this.loading = false;\n      });\n    },\n  },\n  watch: {\n    // 切换顶部导航选中项触发\n    active(newValue, oldValue) {\n      //回到顶部\n      window.scrollTo(0, 0);\n      //将this.page 重置为1 (从第一页重新加载)\n      this.page = 1;\n      console.log(newValue); //newValue 就是当前类别id\n      //发送http请求 访问当前类别下的第一页数据 更新列表\n      this.loadArticles(newValue, 1, (arts) => {\n        this.articles = arts;\n      });\n    },\n    selected(newValue, oldValue) {\n      if (newValue == \"me\") {\n        //用户点了底部选项:我的\n        this.$router.push(\"/me\");\n      }\n      this.selected = \"main\";\n    },\n  },\n\n  // 当前页面变为激活态时触发\n  activated() {\n    console.log(\"激活Home\");\n    this.loading = false;\n  },\n  // 当前页面变为非激活态时触发\n  deactivated() {\n    console.log(\"非激活Home\");\n    this.loading = true;\n  },\n  mounted() {\n    this.initSwipe(); //初始化轮播图\n    this.initNav(); //初始化导航\n    //发送http请求,访问ui类别下的首页文章数据\n    this.loadArticles(1, 1, (arts) => {\n      this.articles = arts;\n    });\n  },\n};\n</script>\n\n<style scoped>\n.link {\n  color: white;\n  margin-left: 10px;\n}\n.mint-swipe-item img {\n  width: 100%;\n}\n.articleItem {\n  padding: 10px 0;\n  margin: 0 10px;\n  border-bottom: 1px solid #999;\n}\n.articleItem-header {\n  font-weight: 600;\n  font-size: 17px;\n  color: #1a1a1a;\n  line-height: 22px;\n}\n.articleItem-wrapper {\n  display: flex;\n  align-items: center;\n  padding-top: 10px;\n  width: 100%;\n}\n.articleImg {\n  margin-right: 15px;\n}\n.articleImg img {\n  width: 112px;\n  height: 74px;\n  border-radius: 5px;\n}\n.articleDes {\n  height: 65px;\n  font-size: 15px;\n  overflow: hidden;\n  font-weight: 400;\n  text-overflow: ellipsis;\n  line-height: 21px;\n  letter-spacing: normal;\n  color: #444;\n}\n</style>"]}]}