{"remainingRequest":"C:\\web2019\\2-XM\\demo\\scaffolding\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\web2019\\2-XM\\demo\\scaffolding\\src\\views\\Myself.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\web2019\\2-XM\\demo\\scaffolding\\src\\views\\Myself.vue","mtime":1648807538792},{"path":"C:\\web2019\\2-XM\\demo\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640758910000},{"path":"C:\\web2019\\2-XM\\demo\\scaffolding\\node_modules\\babel-loader\\lib\\index.js","mtime":1640758924000},{"path":"C:\\web2019\\2-XM\\demo\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640758910000},{"path":"C:\\web2019\\2-XM\\demo\\scaffolding\\node_modules\\vue-loader\\lib\\index.js","mtime":1640758926000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG5hbWU6ICIiLCAvL+e7keWumueUqOaIt+WQjeaWh+acrOahhui+k+WFpeeahOWGheWuuQ0KICAgICAgcHdkbmFtZTogIiIsIC8v57uR5a6a5a+G56CB5paH5pys5qGG6L6T5YWl55qE5YaF5a65DQogICAgICBlbWFpbG5hbWU6ICIiLCAvL+e7keWumumCrueuseaWh+acrOahhui+k+WFpeeahOWGheWuuQ0KICAgICAgcGhvbmVuYW1lOiAiIiwgLy/nu5HlrprmiYvmnLrlj7fmlofmnKzmoYbovpPlhaXnmoTlhoXlrrkNCiAgICAgIGltYWdlVXJsOiAiIiwgLy/lm77niYflnLDlnYANCiAgICAgIGltYWdlOiAiIiwgLy/lm77niYfmlbDmja4NCiAgICAgIG9sZHBob25lOiAiIiwgLy/nu5Hlrprml6fmiYvmnLrmlofmnKzmoYbovpPlhaXnmoTlhoXlrrkNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMsIGZpbGVzKSB7DQogICAgICB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlcy5yYXcpOw0KICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgIHRoaXMuaW1hZ2UgPSByZXMudXJsc1swXTsNCiAgICB9LA0KICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlcykgew0KICAgICAgY29uc3QgaXNKUEcgPSBmaWxlcy50eXBlID09PSAiaW1hZ2UvanBlZyI7DQogICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlcy5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOw0KICAgICAgaWYgKCFpc0pQRykgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlpLTlg4/lm77niYflj6rog73mmK8gSlBHIOagvOW8jyEiKTsNCiAgICAgIH0NCiAgICAgIGlmICghaXNMdDJNKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhIik7DQogICAgICB9DQogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNOw0KICAgIH0sDQogICAgY2hlY2tOYW1lKCkgew0KICAgICAgbGV0IHJlZyA9IC9eW2EtekEtWjAtOV8tXXs0LDE2fSQvOw0KICAgICAgaWYgKHJlZy50ZXN0KHRoaXMubmFtZSkpIHsNCiAgICAgICAgY29uc29sZS5sb2coIuagvOW8j+ato+ehriIsIHRoaXMubmFtZSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygi5qC85byP6ZSZ6K+vIik7DQogICAgICB9DQogICAgfSwNCiAgICBjaGVja1B3ZCgpIHsNCiAgICAgIGxldCBwd2QgPSAvXjFbMy05XVxkezl9JC87DQogICAgICBpZiAocHdkLnRlc3QodGhpcy5wd2RuYW1lKSkgew0KICAgICAgICBjb25zb2xlLmxvZygi5qC85byP5q2j56GuIiwgdGhpcy5wd2RuYW1lKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUubG9nKCLmoLzlvI/plJnor68iKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrUGhvbmUoKSB7DQogICAgICBsZXQgcGhvbmUgPQ0KICAgICAgICAvXig/Oig/OlwrfDAwKTg2KT8xKD86KD86M1tcZF0pfCg/OjRbNS03OV0pfCg/OjVbMC0zNS05XSl8KD86Nls1LTddKXwoPzo3WzAtOF0pfCg/OjhbXGRdKXwoPzo5WzE4OV0pKVxkezh9JC87DQogICAgICBpZiAocGhvbmUudGVzdCh0aGlzLnBob25lbmFtZSkpIHsNCiAgICAgICAgY29uc29sZS5sb2coIuagvOW8j+ato+ehriIsIHRoaXMucGhvbmVuYW1lKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUubG9nKCLmoLzlvI/plJnor68iKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrb2xkcGhvbmUoKSB7DQogICAgICBsZXQgb2xkID0NCiAgICAgICAgL14oPzooPzpcK3wwMCk4Nik/MSg/Oig/OjNbXGRdKXwoPzo0WzUtNzldKXwoPzo1WzAtMzUtOV0pfCg/OjZbNS03XSl8KD86N1swLThdKXwoPzo4W1xkXSl8KD86OVsxODldKSlcZHs4fSQvOw0KICAgICAgaWYgKG9sZC50ZXN0KHRoaXMub2xkcGhvbmUpKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCLmoLzlvI/mraPnoa4iLCB0aGlzLm9sZHBob25lKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUubG9nKCLmoLzlvI/plJnor68iKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrRW1haWwoKSB7DQogICAgICBsZXQgZW1haWwgPQ0KICAgICAgICAvXltBLVphLXowLTlcdTRlMDAtXHU5ZmE1XStAW2EtekEtWjAtOV8tXSsoXC5bYS16QS1aMC05Xy1dKykrJC87DQogICAgICBpZiAoZW1haWwudGVzdCh0aGlzLmVtYWlsbmFtZSkpIHsNCiAgICAgICAgY29uc29sZS5sb2coIuagvOW8j+ato+ehriIsIHRoaXMuZW1haWxuYW1lKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUubG9nKCLmoLzlvI/plJnor68iKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v6aqM6K+B6KGo5Y2VDQogICAgY2hlY2tGb3JtKCkgew0KICAgICAgLy/lj5HpgIFwdXTor7fmsYIs5omn6KGM5L+u5pS55Lia5YqhDQogICAgICB0aGlzLmF4aW9zDQogICAgICAgIC5wdXQoDQogICAgICAgICAgIi9lZGl0IiwNCiAgICAgICAgICBgdV9uYW1lcz0ke3RoaXMubmFtZX0mdV9wd2Q9JHt0aGlzLnB3ZG5hbWV9JnVfcGhvbmU9JHt0aGlzLnBob25lbmFtZX0mdV9lbWFpbD0ke3RoaXMuZW1haWxuYW1lfSZ1X3BpYz0ke3RoaXMuaW1hZ2V9Jm9sZHBob25lPSR7dGhpcy5vbGRwaG9uZX1gDQogICAgICAgICkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMSkgew0KICAgICAgICAgICAgLy/lkJFzZXNzaW9uU3RvcmFnZeS4reWtmOWCqA0KICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibmFtZSIsIHRoaXMubmFtZSk7DQogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJwd2RuYW1lIiwgdGhpcy5wd2RuYW1lKTsNCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImVtYWlsbmFtZSIsIHRoaXMuZW1haWxuYW1lKTsNCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInBob25lbmFtZSIsIHRoaXMucGhvbmVuYW1lKTsNCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInBpYyIsIHRoaXMuaW1hZ2UpOw0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOw0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7DQogICAgICAgICAgICAvL+S/ruaUuemUmeivrw0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZWJveCgi5o+Q56S6IiwgIuS/ruaUuemUmeivryIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["Myself.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Myself.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <p class=\"my\">用户信息修改</p>\r\n    </div>\r\n    <div class=\"\">\r\n      <van-form>\r\n        <van-field\r\n          @blur.native.capture=\"checkoldphone\"\r\n          v-model=\"oldphone\"\r\n          label=\"旧手机号\"\r\n          name=\"旧手机号\"\r\n          placeholder=\"旧手机号\"\r\n          :rules=\"[{ required: true, message: '请填写旧手机号' }]\"\r\n        />\r\n        <van-field\r\n          @blur.native.capture=\"checkName\"\r\n          v-model=\"name\"\r\n          label=\"用户名\"\r\n          name=\"用户名\"\r\n          placeholder=\"用户名\"\r\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n        />\r\n        <van-field\r\n          :attr=\"{ maxlength: '11' }\"\r\n          @blur.native.capture=\"checkPwd\"\r\n          v-model=\"pwdname\"\r\n          type=\"password\"\r\n          name=\"密码\"\r\n          label=\"密码\"\r\n          placeholder=\"密码\"\r\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n        />\r\n        <van-field\r\n          @blur.native.capture=\"checkPhone\"\r\n          v-model=\"phonename\"\r\n          type=\"password\"\r\n          name=\"手机号\"\r\n          label=\"手机号\"\r\n          placeholder=\"手机号\"\r\n          :rules=\"[{ required: true, message: '请填写手机号' }]\"\r\n        />\r\n        <van-field\r\n          @blur.native.capture=\"checkEmail\"\r\n          v-model=\"emailname\"\r\n          type=\"password\"\r\n          name=\"邮箱\"\r\n          label=\"邮箱\"\r\n          placeholder=\"邮箱\"\r\n          :rules=\"[{ required: true, message: '请填写邮箱' }]\"\r\n        />\r\n\r\n        <div>\r\n          <p class=\"upp\">头像修改</p>\r\n        </div>\r\n        <div class=\"ava\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          action=\"http://localhost:3000/upload\"\r\n          name=\"uploadFile\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n        </div>\r\n        <div style=\"margin: 16px\">\r\n          <van-button round block type=\"info\" @click=\"checkForm\"\r\n            >提交</van-button\r\n          >\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"\", //绑定用户名文本框输入的内容\r\n      pwdname: \"\", //绑定密码文本框输入的内容\r\n      emailname: \"\", //绑定邮箱文本框输入的内容\r\n      phonename: \"\", //绑定手机号文本框输入的内容\r\n      imageUrl: \"\", //图片地址\r\n      image: \"\", //图片数据\r\n      oldphone: \"\", //绑定旧手机文本框输入的内容\r\n    };\r\n  },\r\n  methods: {\r\n    handleAvatarSuccess(res, files) {\r\n      this.imageUrl = URL.createObjectURL(files.raw);\r\n      console.log(res);\r\n      this.image = res.urls[0];\r\n    },\r\n    beforeAvatarUpload(files) {\r\n      const isJPG = files.type === \"image/jpeg\";\r\n      const isLt2M = files.size / 1024 / 1024 < 2;\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    checkName() {\r\n      let reg = /^[a-zA-Z0-9_-]{4,16}$/;\r\n      if (reg.test(this.name)) {\r\n        console.log(\"格式正确\", this.name);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkPwd() {\r\n      let pwd = /^1[3-9]\\d{9}$/;\r\n      if (pwd.test(this.pwdname)) {\r\n        console.log(\"格式正确\", this.pwdname);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkPhone() {\r\n      let phone =\r\n        /^(?:(?:\\+|00)86)?1(?:(?:3[\\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\\d])|(?:9[189]))\\d{8}$/;\r\n      if (phone.test(this.phonename)) {\r\n        console.log(\"格式正确\", this.phonename);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkoldphone() {\r\n      let old =\r\n        /^(?:(?:\\+|00)86)?1(?:(?:3[\\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\\d])|(?:9[189]))\\d{8}$/;\r\n      if (old.test(this.oldphone)) {\r\n        console.log(\"格式正确\", this.oldphone);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkEmail() {\r\n      let email =\r\n        /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      if (email.test(this.emailname)) {\r\n        console.log(\"格式正确\", this.emailname);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    //验证表单\r\n    checkForm() {\r\n      //发送put请求,执行修改业务\r\n      this.axios\r\n        .put(\r\n          \"/edit\",\r\n          `u_names=${this.name}&u_pwd=${this.pwdname}&u_phone=${this.phonename}&u_email=${this.emailname}&u_pic=${this.image}&oldphone=${this.oldphone}`\r\n        )\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.data.code == 1) {\r\n            //向sessionStorage中存储\r\n            sessionStorage.setItem(\"name\", this.name);\r\n            sessionStorage.setItem(\"pwdname\", this.pwdname);\r\n            sessionStorage.setItem(\"emailname\", this.emailname);\r\n            sessionStorage.setItem(\"phonename\", this.phonename);\r\n            sessionStorage.setItem(\"pic\", this.image);\r\n            this.$router.push(\"/login\");\r\n          } else if (res.data.code == 0) {\r\n            //修改错误\r\n            this.$messagebox(\"提示\", \"修改错误\");\r\n          }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style  scoped src=\"../assets/css/myself.css\">\r\n</style>"]}]}