{"remainingRequest":"C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\src\\views\\Myself.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\src\\views\\Myself.vue","mtime":1649571059884},{"path":"C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640758910000},{"path":"C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\node_modules\\babel-loader\\lib\\index.js","mtime":1640758924000},{"path":"C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640758910000},{"path":"C:\\Users\\苏子龙\\Desktop\\2-XM\\demo\\scaffolding\\node_modules\\vue-loader\\lib\\index.js","mtime":1640758926000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAiIiwKICAgICAgLy/nu5HlrprnlKjmiLflkI3mlofmnKzmoYbovpPlhaXnmoTlhoXlrrkKICAgICAgcHdkbmFtZTogIiIsCiAgICAgIC8v57uR5a6a5a+G56CB5paH5pys5qGG6L6T5YWl55qE5YaF5a65CiAgICAgIGVtYWlsbmFtZTogIiIsCiAgICAgIC8v57uR5a6a6YKu566x5paH5pys5qGG6L6T5YWl55qE5YaF5a65CiAgICAgIHBob25lbmFtZTogIiIsCiAgICAgIC8v57uR5a6a5omL5py65Y+35paH5pys5qGG6L6T5YWl55qE5YaF5a65CiAgICAgIGltYWdlVXJsOiAiIiwKICAgICAgLy/lm77niYflnLDlnYAKICAgICAgaW1hZ2U6ICIiLAogICAgICAvL+WbvueJh+aVsOaNrgogICAgICBvbGRwaG9uZTogIiIgLy/nu5Hlrprml6fmiYvmnLrmlofmnKzmoYbovpPlhaXnmoTlhoXlrrkKCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUF2YXRhclN1Y2Nlc3MocmVzLCBmaWxlcykgewogICAgICB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlcy5yYXcpOwogICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB0aGlzLmltYWdlID0gcmVzLnVybHNbMF07CiAgICB9LAoKICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlcykgewogICAgICBjb25zdCBpc0pQRyA9IGZpbGVzLnR5cGUgPT09ICJpbWFnZS9qcGVnIjsKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZXMuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlpLTlg4/lm77niYflj6rog73mmK8gSlBHIOagvOW8jyEiKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CISIpOwogICAgICB9CgogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNOwogICAgfSwKCiAgICBjaGVja05hbWUoKSB7CiAgICAgIGxldCByZWcgPSAvXlthLXpBLVowLTlfLV17NCwxNn0kLzsKCiAgICAgIGlmIChyZWcudGVzdCh0aGlzLm5hbWUpKSB7CiAgICAgICAgY29uc29sZS5sb2coIuagvOW8j+ato+ehriIsIHRoaXMubmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIuagvOW8j+mUmeivryIpOwogICAgICB9CiAgICB9LAoKICAgIGNoZWNrUHdkKCkgewogICAgICBsZXQgcHdkID0gL14xWzMtOV1cZHs5fSQvOwoKICAgICAgaWYgKHB3ZC50ZXN0KHRoaXMucHdkbmFtZSkpIHsKICAgICAgICBjb25zb2xlLmxvZygi5qC85byP5q2j56GuIiwgdGhpcy5wd2RuYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygi5qC85byP6ZSZ6K+vIik7CiAgICAgIH0KICAgIH0sCgogICAgY2hlY2tQaG9uZSgpIHsKICAgICAgbGV0IHBob25lID0gL14oPzooPzpcK3wwMCk4Nik/MSg/Oig/OjNbXGRdKXwoPzo0WzUtNzldKXwoPzo1WzAtMzUtOV0pfCg/OjZbNS03XSl8KD86N1swLThdKXwoPzo4W1xkXSl8KD86OVsxODldKSlcZHs4fSQvOwoKICAgICAgaWYgKHBob25lLnRlc3QodGhpcy5waG9uZW5hbWUpKSB7CiAgICAgICAgY29uc29sZS5sb2coIuagvOW8j+ato+ehriIsIHRoaXMucGhvbmVuYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygi5qC85byP6ZSZ6K+vIik7CiAgICAgIH0KICAgIH0sCgogICAgY2hlY2tvbGRwaG9uZSgpIHsKICAgICAgbGV0IG9sZCA9IC9eKD86KD86XCt8MDApODYpPzEoPzooPzozW1xkXSl8KD86NFs1LTc5XSl8KD86NVswLTM1LTldKXwoPzo2WzUtN10pfCg/OjdbMC04XSl8KD86OFtcZF0pfCg/OjlbMTg5XSkpXGR7OH0kLzsKCiAgICAgIGlmIChvbGQudGVzdCh0aGlzLm9sZHBob25lKSkgewogICAgICAgIGNvbnNvbGUubG9nKCLmoLzlvI/mraPnoa4iLCB0aGlzLm9sZHBob25lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygi5qC85byP6ZSZ6K+vIik7CiAgICAgIH0KICAgIH0sCgogICAgY2hlY2tFbWFpbCgpIHsKICAgICAgbGV0IGVtYWlsID0gL15bQS1aYS16MC05XHU0ZTAwLVx1OWZhNV0rQFthLXpBLVowLTlfLV0rKFwuW2EtekEtWjAtOV8tXSspKyQvOwoKICAgICAgaWYgKGVtYWlsLnRlc3QodGhpcy5lbWFpbG5hbWUpKSB7CiAgICAgICAgY29uc29sZS5sb2coIuagvOW8j+ato+ehriIsIHRoaXMuZW1haWxuYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygi5qC85byP6ZSZ6K+vIik7CiAgICAgIH0KICAgIH0sCgogICAgLy/pqozor4HooajljZUKICAgIGNoZWNrRm9ybSgpIHsKICAgICAgLy/lj5HpgIFwdXTor7fmsYIs5omn6KGM5L+u5pS55Lia5YqhCiAgICAgIHRoaXMuYXhpb3MucHV0KCIvZWRpdCIsIGB1X25hbWVzPSR7dGhpcy5uYW1lfSZ1X3B3ZD0ke3RoaXMucHdkbmFtZX0mdV9waG9uZT0ke3RoaXMucGhvbmVuYW1lfSZ1X2VtYWlsPSR7dGhpcy5lbWFpbG5hbWV9JnVfcGljPSR7dGhpcy5pbWFnZX0mb2xkcGhvbmU9JHt0aGlzLm9sZHBob25lfWApLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAxKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5jb2RlID09IDApIHsKICAgICAgICAgIC8v5L+u5pS56ZSZ6K+vCiAgICAgICAgICB0aGlzLiRtZXNzYWdlYm94KCLmj5DnpLoiLCAi5L+u5pS56ZSZ6K+vIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["Myself.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <p class=\"my\">用户信息修改</p>\r\n    </div>\r\n    <div class=\"map\">\r\n      <van-form>\r\n        <van-field\r\n          @blur.native.capture=\"checkoldphone\"\r\n          v-model=\"oldphone\"\r\n          label=\"旧手机号\"\r\n          name=\"旧手机号\"\r\n          placeholder=\"旧手机号\"\r\n          :rules=\"[{ required: true, message: '请填写旧手机号' }]\"\r\n        />\r\n        <van-field\r\n          @blur.native.capture=\"checkName\"\r\n          v-model=\"name\"\r\n          label=\"用户名\"\r\n          name=\"用户名\"\r\n          placeholder=\"用户名\"\r\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n        />\r\n        <van-field\r\n          :attr=\"{ maxlength: '11' }\"\r\n          @blur.native.capture=\"checkPwd\"\r\n          v-model=\"pwdname\"\r\n          type=\"password\"\r\n          name=\"密码\"\r\n          label=\"密码\"\r\n          placeholder=\"密码\"\r\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n        />\r\n        <van-field\r\n          @blur.native.capture=\"checkPhone\"\r\n          v-model=\"phonename\"\r\n          type=\"password\"\r\n          name=\"手机号\"\r\n          label=\"手机号\"\r\n          placeholder=\"手机号\"\r\n          :rules=\"[{ required: true, message: '请填写手机号' }]\"\r\n        />\r\n        <van-field\r\n          @blur.native.capture=\"checkEmail\"\r\n          v-model=\"emailname\"\r\n          type=\"password\"\r\n          name=\"邮箱\"\r\n          label=\"邮箱\"\r\n          placeholder=\"邮箱\"\r\n          :rules=\"[{ required: true, message: '请填写邮箱' }]\"\r\n        />\r\n\r\n        <div>\r\n          <p class=\"upp\">头像修改</p>\r\n        </div>\r\n        <div class=\"ava\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          action=\"http://localhost:3000/upload\"\r\n          name=\"uploadFile\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n        </div>\r\n        <div style=\"margin: 16px\">\r\n          <van-button round block type=\"info\" @click=\"checkForm\"\r\n            >提交</van-button\r\n          >\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"\", //绑定用户名文本框输入的内容\r\n      pwdname: \"\", //绑定密码文本框输入的内容\r\n      emailname: \"\", //绑定邮箱文本框输入的内容\r\n      phonename: \"\", //绑定手机号文本框输入的内容\r\n      imageUrl: \"\", //图片地址\r\n      image: \"\", //图片数据\r\n      oldphone: \"\", //绑定旧手机文本框输入的内容\r\n    };\r\n  },\r\n  methods: {\r\n    handleAvatarSuccess(res, files) {\r\n      this.imageUrl = URL.createObjectURL(files.raw);\r\n      console.log(res);\r\n      this.image = res.urls[0];\r\n    },\r\n    beforeAvatarUpload(files) {\r\n      const isJPG = files.type === \"image/jpeg\";\r\n      const isLt2M = files.size / 1024 / 1024 < 2;\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    checkName() {\r\n      let reg = /^[a-zA-Z0-9_-]{4,16}$/;\r\n      if (reg.test(this.name)) {\r\n        console.log(\"格式正确\", this.name);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkPwd() {\r\n      let pwd = /^1[3-9]\\d{9}$/;\r\n      if (pwd.test(this.pwdname)) {\r\n        console.log(\"格式正确\", this.pwdname);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkPhone() {\r\n      let phone =\r\n        /^(?:(?:\\+|00)86)?1(?:(?:3[\\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\\d])|(?:9[189]))\\d{8}$/;\r\n      if (phone.test(this.phonename)) {\r\n        console.log(\"格式正确\", this.phonename);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkoldphone() {\r\n      let old =\r\n        /^(?:(?:\\+|00)86)?1(?:(?:3[\\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\\d])|(?:9[189]))\\d{8}$/;\r\n      if (old.test(this.oldphone)) {\r\n        console.log(\"格式正确\", this.oldphone);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    checkEmail() {\r\n      let email =\r\n        /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      if (email.test(this.emailname)) {\r\n        console.log(\"格式正确\", this.emailname);\r\n      } else {\r\n        console.log(\"格式错误\");\r\n      }\r\n    },\r\n    //验证表单\r\n    checkForm() {\r\n      //发送put请求,执行修改业务\r\n      this.axios\r\n        .put(\r\n          \"/edit\",\r\n          `u_names=${this.name}&u_pwd=${this.pwdname}&u_phone=${this.phonename}&u_email=${this.emailname}&u_pic=${this.image}&oldphone=${this.oldphone}`\r\n        )\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.data.code == 1) {\r\n          this.$router.push(\"/login\");\r\n          } else if (res.data.code == 0) {\r\n            //修改错误\r\n            this.$messagebox(\"提示\", \"修改错误\");\r\n          }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style  scoped src=\"../assets/css/myself.css\">\r\n</style>"],"sourceRoot":"src/views"}]}